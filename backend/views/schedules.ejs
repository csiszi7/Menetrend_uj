<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/schedules/cssschedules.css" />
    <title>Menetrendek</title>
  </head>
  <body>
    <%- include('nav.ejs') %>

    <div id="menetrend-kontener">
      <h1>Menetrendek</h1>
      <p><a href="/api/new-schedule">Új menetrend felvétele</a></p>

      <div id="menetrendek-kontener">
        <% schedules.forEach(elem => { %>
          <div class="menetrend">
            <h2><%= elem.jarat || elem.nev %></h2>

            <h4>
              <%= elem.induloallomas %> → <%= elem.celallomas %>
            </h4>

            <% if (elem.idotartam && elem.idotartam.length) { %>
              <p><strong>Időtartam:</strong> <%= elem.idotartam.join(', ') %></p>
            <% } %>

            <% if (elem.idopontok && elem.idopontok.length) { %>
              <p><strong>Időpontok:</strong> <%= elem.idopontok.join(', ') %></p>
            <% } %>

            <% if (elem.kedvezmeny) { %>
              <p><strong>Kedvezmény:</strong> <%= elem.kedvezmeny %></p>
            <% } %>

            <p><strong>Klíma:</strong> <%= elem.klima ? 'Van' : 'Nincs' %></p>
            <p><strong>Helyjegy:</strong> <%= elem.helyjegy ? 'Kell' : 'Nem kell' %></p>

            <% if (elem.allomasok && elem.allomasok.length) { %>
              <p><strong>Állomások:</strong> <%= elem.allomasok.join(' → ') %></p>
            <% } %>

            <% if (elem.kortabla && elem.kortabla.length) { %>
              <p><strong>Körtáblák:</strong> <%= elem.kortabla.join(', ') %></p>
            <% } %>

            <% if (elem.kepek && elem.kepek.length) { %>
              <div class="menetrend-kepek">
                <% elem.kepek.forEach(kep => { %>
                  <div class="menetrend-kep">
                    <img src="<%= kep %>" alt="Kép" />
                  </div>
                <% }) %>
              </div>
            <% } %>

            <div id="menetrend-gombok">
              <a href="/api/schedules-backend/<%= elem._id %>">Lekérés</a>
              <button onclick="torol('<%= elem._id %>')">Törlés</button>
            </div>
          </div>
        <% }) %>
      </div>
    </div>

    <script src="/js/menetrendek.js"></script>
  </body>
</html>
